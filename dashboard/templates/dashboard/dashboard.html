{% extends "base.html" %}
{% load static %}

{% block page_title %}Dashboard{% endblock  %}
{% block styles %} <link rel="stylesheet" href="{% static "dashboard/dashboard.css" %}"> {% endblock  %}

{% block content %}
 <section class="dashboard">

  <h1 class="dashboard-title">Portfolio Summary</h1>

  <table class="dashboard-table">
    <thead>
      <tr>
        <th>Metric</th>
        <th>Value</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>

      <tr>
        <td>Total Invested</td>
        <td>${{ total_invested|floatformat:2 }}</td>
        <td>Total amount of money spent buying cards.</td>
      </tr>

      <tr>
        <td>Total Earned</td>
        <td class="positive">${{ total_earned|floatformat:2 }}</td>
        <td>Profit or loss already realized from sold cards.</td>
      </tr>

      <tr>
        <td>Current Portfolio Value</td>
        <td>${{ current_portfolio_value|floatformat:2 }}</td>
        <td>Market value of cards you currently own.</td>
      </tr>

      <tr>
        <td>Unrealized P/L</td>
        <td class="{% if unrealized_profit_loss >= 0 %}positive{% else %}negative{% endif %}">
          {% if unrealized_profit_loss %}
            {{ unrealized_profit_loss|floatformat:2 }}
          {% else %}
            —
          {% endif %}
        </td>
        <td>Paper gain or loss on cards not yet sold.</td>
      </tr>

      <tr>
        <td>ROI</td>
        <td class="{% if roi >= 0 %}positive{% else %}negative{% endif %}">
          {% if roi %}
            {{ roi|floatformat:2 }}%
          {% else %}
            —
          {% endif %}
          
        </td>
        <td>Return based only on cards you still hold.</td>
      </tr>

      <tr class="highlight">
        <td>Total ROI</td>
        <td class="{% if total_roi >= 0 %}positive{% else %}negative{% endif %}">
          {{ total_roi|floatformat:2 }}%
        </td>
        <td>Overall return including sold and held cards.</td>
      </tr>

    </tbody>
  </table>

  <div class="dashboard-explanation">
    <h3>How to read these metrics</h3>
    <ul>
      <li><strong>Unrealized P/L</strong> can change as market prices update.</li>
      <li><strong>Total Earned</strong> represents locked-in profit or loss.</li>
      <li><strong>Total ROI</strong> is the best indicator of long-term performance.</li>
      <li>Market prices are updated daily using Scryfall bulk data.</li>
    </ul>
  </div>

</section>


{% endblock  %}